(function () {
    'use strict';

    window.onload = function () {
        var imgs = document.getElementsByTagName('img'), demo = document.getElementById('demo'), imgs = [imgs[1], imgs[2]], searchImg = new (SearchImg.bind.apply(SearchImg, [void 0].concat(imgs, [{
                sampleSize: 10,
                similarity: 0.95 // 默认：0.95，表示只返回相似度高于95%的结果（值越小返回的相似结果可能就越多）
            }])))(), searchResult = searchImg.search();
        // 绘制搜索结果
        demo.innerHTML = '';
        imgs.forEach(function (item, index) {
            var width = item.width, height = item.height, canvasObj = searchImg.createCanvas(width, height), ctx = canvasObj.ctx;
            ctx.drawImage(item, 0, 0, width, height);
            // 在第一张图片绘制搜索到的区域
            if (index === 0) {
                // 绘制遮罩层，以突出结果框
                ctx.fillStyle = 'rgba(0,0,0,0.6)';
                ctx.rect(0, 0, width, height);
                ctx.fill();
                // 圈出搜索到的结果
                ctx.lineWidth = 4;
                ctx.strokeStyle = 'rgba(255,0,255,0.8)';
                searchResult.forEach(function (item) {
                    ctx.strokeRect(item.x, item.y, imgs[1].width, imgs[1].height);
                });
            }
            demo.appendChild(canvasObj.dom);
        });
        console.log('搜索结果', searchResult);
        // console.log(searchImg);
    };

}());
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5lczYiLCJzb3VyY2VzIjpbInNyYy9qcy9tYWluLmVzNiJdLCJzb3VyY2VzQ29udGVudCI6WyJ3aW5kb3cub25sb2FkID0gZnVuY3Rpb24oKXtcbiAgICBsZXQgaW1ncyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdpbWcnKSxcbiAgICAgICAgZGVtbyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkZW1vJyksXG4gICAgICAgIGltZ3MgPSBbaW1nc1sxXSxpbWdzWzJdXSxcbiAgICAgICAgc2VhcmNoSW1nID0gbmV3IFNlYXJjaEltZyguLi5pbWdzLHtcbiAgICAgICAgICAgIHNhbXBsZVNpemU6MTAsICAgLy8g6buY6K6k77yaOO+8jOWPluagt+WDj+e0oOWkp+Wwj++8jOWPluagt+i2iuWkp+i2iuiAl+i0ueaAp+iDve+8jOS9huWMuemFjeeahOeyvuW6puS5n+S8mui2iumrmFxuICAgICAgICAgICAgc2ltaWxhcml0eTowLjk1ICAvLyDpu5jorqTvvJowLjk177yM6KGo56S65Y+q6L+U5Zue55u45Ly85bqm6auY5LqOOTUl55qE57uT5p6c77yI5YC86LaK5bCP6L+U5Zue55qE55u45Ly857uT5p6c5Y+v6IO95bCx6LaK5aSa77yJXG4gICAgICAgIH0pLFxuICAgICAgICBzZWFyY2hSZXN1bHQgPSBzZWFyY2hJbWcuc2VhcmNoKCk7XG4gICAgXG4gICAgLy8g57uY5Yi25pCc57Si57uT5p6cXG4gICAgZGVtby5pbm5lckhUTUwgPSAnJztcbiAgICBpbWdzLmZvckVhY2goKGl0ZW0saW5kZXgpPT57XG4gICAgICAgIGxldCB3aWR0aCA9IGl0ZW0ud2lkdGgsXG4gICAgICAgICAgICBoZWlnaHQgPSBpdGVtLmhlaWdodCxcbiAgICAgICAgICAgIGNhbnZhc09iaiA9IHNlYXJjaEltZy5jcmVhdGVDYW52YXMod2lkdGgsaGVpZ2h0KSxcbiAgICAgICAgICAgIGN0eCA9IGNhbnZhc09iai5jdHg7XG4gICAgICAgIGN0eC5kcmF3SW1hZ2UoaXRlbSwwLDAsd2lkdGgsaGVpZ2h0KTtcblxuICAgICAgICAvLyDlnKjnrKzkuIDlvKDlm77niYfnu5jliLbmkJzntKLliLDnmoTljLrln59cbiAgICAgICAgaWYoaW5kZXggPT09IDApe1xuICAgICAgICAgICAgLy8g57uY5Yi26YGu572p5bGC77yM5Lul56qB5Ye657uT5p6c5qGGXG4gICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJ3JnYmEoMCwwLDAsMC42KSc7XG4gICAgICAgICAgICBjdHgucmVjdCgwLDAsd2lkdGgsaGVpZ2h0KTtcbiAgICAgICAgICAgIGN0eC5maWxsKCk7XG5cbiAgICAgICAgICAgIC8vIOWciOWHuuaQnOe0ouWIsOeahOe7k+aenFxuICAgICAgICAgICAgY3R4LmxpbmVXaWR0aCA9IDQ7XG4gICAgICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSAncmdiYSgyNTUsMCwyNTUsMC44KSc7XG4gICAgICAgICAgICBzZWFyY2hSZXN1bHQuZm9yRWFjaChpdGVtID0+IHtcbiAgICAgICAgICAgICAgICBjdHguc3Ryb2tlUmVjdChpdGVtLngsaXRlbS55LGltZ3NbMV0ud2lkdGgsaW1nc1sxXS5oZWlnaHQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgZGVtby5hcHBlbmRDaGlsZChjYW52YXNPYmouZG9tKTtcbiAgICB9KTtcbiAgICBcbiAgICBjb25zb2xlLmxvZygn5pCc57Si57uT5p6cJyxzZWFyY2hSZXN1bHQpO1xuICAgIC8vIGNvbnNvbGUubG9nKHNlYXJjaEltZyk7XG59OyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7SUFBQSxNQUFNLENBQUMsTUFBTSxHQUFHO1FBQ1osSUFBSSxJQUFJLEdBQUcsUUFBUSxDQUFDLG9CQUFvQixDQUFDLEtBQUssQ0FBQyxFQUMzQyxJQUFJLEdBQUcsUUFBUSxDQUFDLGNBQWMsQ0FBQyxNQUFNLENBQUMsRUFDdEMsSUFBSSxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUN4QixTQUFTLFFBQU8sU0FBUyxZQUFULFNBQVMsa0JBQUksSUFBSSxHQUFDO2dCQUM5QixVQUFVLEVBQUMsRUFBRTtnQkFDYixVQUFVLEVBQUMsSUFBSTthQUNsQixNQUFDLEVBQ0YsWUFBWSxHQUFHLFNBQVMsQ0FBQyxNQUFNLEVBQUUsQ0FBQzs7UUFHdEMsSUFBSSxDQUFDLFNBQVMsR0FBRyxFQUFFLENBQUM7UUFDcEIsSUFBSSxDQUFDLE9BQU8sQ0FBQyxVQUFDLElBQUksRUFBQyxLQUFLO1lBQ3BCLElBQUksS0FBSyxHQUFHLElBQUksQ0FBQyxLQUFLLEVBQ2xCLE1BQU0sR0FBRyxJQUFJLENBQUMsTUFBTSxFQUNwQixTQUFTLEdBQUcsU0FBUyxDQUFDLFlBQVksQ0FBQyxLQUFLLEVBQUMsTUFBTSxDQUFDLEVBQ2hELEdBQUcsR0FBRyxTQUFTLENBQUMsR0FBRyxDQUFDO1lBQ3hCLEdBQUcsQ0FBQyxTQUFTLENBQUMsSUFBSSxFQUFDLENBQUMsRUFBQyxDQUFDLEVBQUMsS0FBSyxFQUFDLE1BQU0sQ0FBQyxDQUFDOztZQUdyQyxJQUFHLEtBQUssS0FBSyxDQUFDLEVBQUM7O2dCQUVYLEdBQUcsQ0FBQyxTQUFTLEdBQUcsaUJBQWlCLENBQUM7Z0JBQ2xDLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxLQUFLLEVBQUMsTUFBTSxDQUFDLENBQUM7Z0JBQzNCLEdBQUcsQ0FBQyxJQUFJLEVBQUUsQ0FBQzs7Z0JBR1gsR0FBRyxDQUFDLFNBQVMsR0FBRyxDQUFDLENBQUM7Z0JBQ2xCLEdBQUcsQ0FBQyxXQUFXLEdBQUcscUJBQXFCLENBQUM7Z0JBQ3hDLFlBQVksQ0FBQyxPQUFPLENBQUMsVUFBQSxJQUFJO29CQUNyQixHQUFHLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxDQUFDLEVBQUMsSUFBSSxDQUFDLENBQUMsRUFBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxFQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQztpQkFDOUQsQ0FBQyxDQUFDO2FBQ047WUFFRCxJQUFJLENBQUMsV0FBVyxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsQ0FBQztTQUNuQyxDQUFDLENBQUM7UUFFSCxPQUFPLENBQUMsR0FBRyxDQUFDLE1BQU0sRUFBQyxZQUFZLENBQUMsQ0FBQzs7SUFFckMsQ0FBQyxDQUFDOzs7OyJ9